<view class="section">
  <!-- 资料整理与云存储模块占位：
    1. 维护 idioms 集合结构与字段（见项目文档）
    2. 图片上传至云存储：命名 成语拼音+序号.jpg，<=500KB
    3. 可选：知识库小 agent 对话入口
  -->
  <view class="muted">资料管理（待开发）：数据维护与图片上传</view>
</view>

<view class="section">
  <button bindtap="whoami">获取我的 OpenID</button>
  <button bindtap="listRoutes">查询路线</button>
  <button bindtap="listRoutes">查看路线列表</button>
  <button bindtap="ensureProfile">创建/更新我的档案</button>
  <button bindtap="addMyScore">为我加分 +10</button>
  <button bindtap="showTop">查看排行榜(按分数)</button>
  <view class="muted">{{debugMsg}}</view>
  <view wx:for="{{topList}}" wx:key="_id" class="idiom-item">
    <view>{{index+1}}. {{item.nickname || '游客'}} - {{item.score || 0}}</view>
  </view>
</view>

<view class="section">
  <view class="muted">共 {{idioms.length}} 条成语</view>
  <view wx:for="{{idioms}}" wx:key="_id" class="idiom-item">
    <view class="idiom-title">{{item.idiom}}</view>
    <view class="idiom-sub muted">{{item.scenicSpot}}</view>
  </view>
</view> 