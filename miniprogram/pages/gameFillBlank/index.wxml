<view class="container">
  <!-- 图片轮播区域 -->
  <view class="image-carousel" wx:if="{{images && images.length}}">
    <swiper 
      class="image-swiper" 
      current="{{currentImageIndex}}" 
      bindchange="onImageSwiperChange"
      circular="{{true}}"
      autoplay="{{true}}"
      interval="3000"
      duration="300"
    >
      <block wx:for="{{images}}" wx:key="index">
        <swiper-item>
          <image class="carousel-image" src="{{item}}" mode="aspectFill" bindtap="previewImage" data-url="{{item}}"></image>
        </swiper-item>
      </block>
    </swiper>
    <view class="image-indicator" wx:if="{{images.length > 1}}">
      <text class="image-indicator-text">{{currentImageIndex + 1}}/{{images.length}}</text>
    </view>
  </view>
  <view class="title-container">
    <text class="title">成语填空</text>
    <text class="subtitle">猜猜看，这里缺了哪个字？</text>
  </view>

  <view class="idiom-container">
    <block wx:for="{{displayIdiom}}" wx:key="index">
      <view class="char-box {{item.char === ' ' ? 'empty' : ''}}">{{item.char}}</view>
    </block>
  </view>

  <view class="input-section">
    <input class="input-box" placeholder="请填入空缺的字" bindinput="onInput" value="{{userInput}}" maxlength="1" disabled="{{showResult}}" />
    <button class="submit-button" bindtap="checkAnswer" disabled="{{showResult}}">提交</button>
  </view>

  <view wx:if="{{showResult}}" class="result-section">
    <view class="result-text {{isCorrect ? 'correct' : 'incorrect'}}">{{resultText}}</view>
    <button class="next-button" bindtap="getNextIdiom">下一题</button>
  </view>
</view>